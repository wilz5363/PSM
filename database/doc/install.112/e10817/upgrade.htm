<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta http-equiv="Content-Language" content="en" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta name="robots" content="all" scheme="http://www.robotstxt.org/" />
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1" />
<meta name="Date" content="2010-03-15T17:55:43Z" />
<meta name="doctitle" content="Oracle&reg; Grid Infrastructure Installation Guide 11g Release 2 (11.2) for Microsoft Windows" />
<meta name="partno" content="E10817-01" />
<meta name="docid" content="CWWIN" />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />
<link rel="Stylesheet" href="../../dcommon/css/blafdoc.css" title="Default" type="text/css" />
<script type="text/javascript" src="../../dcommon/js/doccd.js">
</script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="concepts.htm" title="Previous" type="text/html" />
<link rel="Next" href="index.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10817.pdf" title="PDF version" type="application/pdf" />
<title>How to Upgrade to Oracle Grid Infrastructure 11g Release 2</title>
</head>
<body>
<div class="header">
<div class="zz-skip-header"><a name="top" id="top" href="#BEGIN">Skip Headers</a></div>
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top"><b>Oracle&reg; Grid Infrastructure Installation Guide<br />
11<i>g</i> Release 2 (11.2) for Microsoft Windows</b><br />
Part Number E10817-01</td>
<td valign="bottom" align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="concepts.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td align="right" valign="top" style="font-size: 90%"><a href="../e10817.pdf">View PDF</a></td>
</tr>
</table>
<a name="BEGIN" id="BEGIN"></a></div>
<div class="IND"><!-- End Header --><a id="BABEHGJG" name="BABEHGJG"></a>
<h1 class="appendix"><span class="secnum">D</span> How to Upgrade to Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2</h1>
<p>This appendix describes how to perform Oracle Clusterware and Oracle Automatic Storage Management (Oracle ASM) upgrades.</p>
<p>This appendix contains the following topics:</p>
<ul>
<li>
<p><a href="#BABEIBEE">Restrictions for Clusterware and Oracle ASM Upgrades to Grid Infrastructure</a></p>
</li>
<li>
<p><a href="#BABCBBGB">Understanding Out-of-Place and Rolling Upgrades</a></p>
</li>
<li>
<p><a href="#CHDFGBBI">Preparing to Upgrade an Existing Oracle Clusterware Installation</a></p>
</li>
<li>
<p><a href="#BABEJEJE">Back Up the Oracle Software Before Upgrades</a></p>
</li>
<li>
<p><a href="#BABHGAGJ">Upgrading Oracle Clusterware</a></p>
</li>
<li>
<p><a href="#CHDEBIID">Upgrading Oracle Automatic Storage Management</a></p>
</li>
<li>
<p><a href="#CHDBGGAE">Updating DB Control and Grid Control Target Parameters</a></p>
</li>
<li>
<p><a href="#CHDDCHJI">Downgrading Oracle Clusterware After an Upgrade</a></p>
</li>
</ul>
<a id="BABEIBEE" name="BABEIBEE"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">D.1</span> Restrictions for Clusterware and Oracle ASM Upgrades to Grid Infrastructure</h2>
<p><a id="sthref531" name="sthref531"></a>Be aware of the following restrictions and changes for upgrades to Oracle Grid Infrastructure installations, which consists of Oracle Clusterware and Oracle Automatic Storage Management (Oracle ASM):</p>
<ul>
<li>
<p>To upgrade existing Oracle Clusterware installations to Oracle Grid Infrastructure 11<span class="italic">g</span>, your current release must be at least 10.1.0.x, 10.2.0.3, 10.2.0.4, 11.1.0.6, or 11.1.0.7.</p>
</li>
<li>
<p>To upgrade existing Oracle ASM installations to Oracle Grid Infrastructure 11<span class="italic">g</span> release 2 (11.2) using the rolling upgrade method, your current release must be at least 11.1.0.6 or 11.1.0.7.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Oracle Upgrade Companion" Note 785351.1 on My Oracle Support:
<p><code><a href="https://support.oracle.com">https://support.oracle.com</a></code></p>
</div>
</li>
<li>
<p>Adding nodes to a cluster during a rolling upgrade is not supported.</p>
</li>
<li>
<p>Oracle Clusterware and Oracle ASM upgrades are always out-of-place upgrades. With Oracle Grid Infrastructure 11<span class="italic">g</span> release 2 (11.2), you cannot perform an in-place upgrade of Oracle Clusterware and Oracle ASM to existing homes.</p>
</li>
<li>
<p>Oracle ASM and Oracle Clusterware both run in the Oracle grid infrastructure home.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
When you upgrade to Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2), Oracle Automatic Storage Management (Oracle ASM) is installed. In Oracle documentation, this home is called the "grid infrastructure home."</div>
</li>
<li>
<p>Only one Oracle Clusterware installation can be active on a server at any time. During a major version upgrade to Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2), the software in the Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) home is not fully functional until the upgrade is completed. Running <code>srvctl</code>, <code>crsctl</code>, and other commands from the Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) home is not supported until the final <code>rootupgrade.sh</code> script is run and the upgrade is complete across all nodes.</p>
<p>To manage databases using earlier versions (release 10.x or 11.1) of Oracle Database during the grid infrastructure upgrade, use the <code>srvctl</code> utility in the existing database homes.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD" href="http://www.oracle.com/pls/db112/lookup?id=UPGRD"><span class="italic">Oracle Database Upgrade Guide</span></a></div>
</div>
<!-- class="sect1" -->
<a id="BABCBBGB" name="BABCBBGB"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">D.2</span> Understanding Out-of-Place and Rolling Upgrades</h2>
<p>Oracle Clusterware upgrades can be rolling upgrades, in which a subset of nodes are brought down and upgraded while other nodes remain active. Oracle Automatic Storage Management 11<span class="italic">g</span> release 2 (11.2) upgrades can be rolling upgrades. If you upgrade a subset of nodes, then a software-only installation is performed on the existing cluster nodes that you do not select for upgrade. Rolling upgrades avoid downtime and ensure continuous availability while the software is upgraded to a new version.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
In contrast with releases prior to Oracle Clusterware 11<span class="italic">g</span> release 2, Oracle Universal Installer always performs rolling upgrades, even if you select all nodes for the upgrade.</div>
<p>During an out-of-place upgrade, the installer installs the newer version in a separate Oracle Clusterware home. Both versions of Oracle Clusterware are on each cluster member node, but only one version is active. By contrast, an in-place upgrade overwrites the software in the current Oracle Clusterware home.</p>
<p>To perform an out-of-place upgrade, you must create new Oracle Grid Infrastrucure homes on each node. Then you can an out-of-place rolling upgrade, so that some nodes are running Oracle Clusterware from the original Oracle Clusterware home, and other nodes are running Oracle Clusterware from the new Oracle Grid Infrastructure home.</p>
<p>If you have an existing Oracle Clusterware installation, then you upgrade your existing cluster by performing an out-of-place upgrade. An in-place upgrade of Oracle Clusterware 11<span class="italic">g</span> release 2 is not supported.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABHGAGJ">"Upgrading Oracle Clusterware"</a> for instructions on completing rolling upgrades</div>
</div>
<!-- class="sect1" -->
<a id="CHDFGBBI" name="CHDFGBBI"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">D.3</span> Preparing to Upgrade an Existing Oracle Clusterware Installation</h2>
<p>Before you upgrade Oracle Clusterware or Oracle ASM, there are certain tasks you should complete first. The following sections describe the tasks you should complete before starting an upgrade:</p>
<ul>
<li>
<p><a href="#CHDDJDEF">Verify System Readiness for Patches and Upgrades</a></p>
</li>
<li>
<p><a href="#CHDHHCFB">Gather the Necessary System Information</a></p>
</li>
<li>
<p><a href="#CHDGJFCA">Upgrade to the Minimum Required Oracle Clusterware Version</a></p>
</li>
<li>
<p><a href="#CHDFJAHE">Unset Environment Variables</a></p>
</li>
</ul>
<a id="CHDDJDEF" name="CHDDJDEF"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">D.3.1</span> Verify System Readiness for Patches and Upgrades</h3>
<p>If you are completing a patch update of Oracle Clusterware or Oracle ASM, then after you download the patch software and before you start to patch or upgrade your software installation, review the Patch Set Release Notes that accompany the patch to determine if your system meets the system requirements for the operating system and the hardware platform.</p>
<p>Use the Cluster Verification Utility to assist you with system checks in preparation for patching or upgrading.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD" href="http://www.oracle.com/pls/db112/lookup?id=UPGRD"><span class="italic">Oracle Database Upgrade Guide</span></a></div>
</div>
<!-- class="sect2" -->
<a id="CHDHHCFB" name="CHDHHCFB"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">D.3.2</span> Gather the Necessary System Information</h3>
<p>Ensure that you have the information you will need during installation, including the following:</p>
<ul>
<li>
<p>The Oracle home location for the current Oracle Clusterware installation.</p>
<p>With Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2), you can perform upgrades on a shared Oracle Clusterware home.</p>
</li>
<li>
<p>An Oracle grid infrastructure home location that is different from your existing Oracle Clusterware home location</p>
</li>
<li>
<p>A SCAN address</p>
</li>
<li>
<p>Two network interface names (consisting of bonded or separate interfaces), which you can identify as public and private interfaces for the cluster</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDGJFCA" name="CHDGJFCA"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">D.3.3</span> Upgrade to the Minimum Required Oracle Clusterware Version</h3>
<p>If you plan to upgrade your Oracle Clusterware 10<span class="italic">g</span> release 2 installation to Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) and your current Oracle Clusterware installation has not been upgraded to at least version 10.2.0.3, then a prerequisite check failure is reported. You must upgrade your current Oracle Clusterware installation to version 10.2.0.3 or higher before starting the upgrade to Oracle Clusterware 11<span class="italic">g</span> release 2.</p>
<p>If you plan to upgrade your Oracle Clusterware 10<span class="italic">g</span> release 1 installation to Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) and your current Oracle Clusterware installation is not 10.1.0.3 or higher, then you must upgrade your current Oracle Clusterware installation to version 10.1.0.3 or higher before starting the upgrade to Oracle Clusterware 11<span class="italic">g</span> release 2.</p>
</div>
<!-- class="sect2" -->
<a id="CHDFJAHE" name="CHDFJAHE"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">D.3.4</span> Unset Environment Variables</h3>
<p><a id="sthref532" name="sthref532"></a>For the user account used to perform the installation, if you have environment variables set for the existing installation, then remove the environment variables <code>ORACLE_HOME</code> and <code>ORACLE_SID</code>, as these environment variables are used during upgrade.</p>
<p>To remove the environment variable settings for all sessions, from the Start menu, right click <span class="bold">My Computer</span> and select <span class="bold">Properties</span>. In the System Properties window, select <span class="bold">Advanced</span>, then click the <span class="bold">Environment Variables</span> button.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABEJEJE" name="BABEJEJE"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">D.4</span> Back Up the Oracle Software Before Upgrades</h2>
<p>B<a id="sthref533" name="sthref533"></a>efore you make any changes to the Oracle software, Oracle recommends that you create a backup of the Oracle software.</p>
</div>
<!-- class="sect1" -->
<a id="BABHGAGJ" name="BABHGAGJ"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">D.5</span> Upgrading Oracle Clusterware</h2>
<p>Use the following procedures to upgrade Oracle Clusterware. You can also choose to upgrade Oracle Automatic Storage Management during the upgrade of Oracle Clusteware.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Oracle recommends that you leave Oracle RAC instances running. During the upgrade process, the database instances on the node being upgraded are stopped and started automatically.</div>
<ol>
<li>
<p>If there are non-clustered, or standalone, Oracle databases that use Oracle ASM running on any of the nodes in the cluster, they must be shut down before you start the upgrade. Listeners associated with those databases do not need to be shut down.</p>
</li>
<li>
<p>Start the installer, and select the option to upgrade an existing Oracle Clusterware and Oracle ASM installation.</p>
</li>
<li>
<p>On the node selection page, select all nodes.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
In contrast with releases prior to Oracle Clusterware 11<span class="italic">g</span> release 2, all upgrades are rolling upgrades, even if you select all nodes for the upgrade.
<p>Oracle recommends that you select all cluster member nodes for the upgrade, and then shut down the database instances on each node before you run the upgrade root script. Start the database instances on each node after the upgrade is complete. You can also use this procedure to upgrade a subset of nodes in the cluster.</p>
</div>
</li>
<li>
<p>Select installation options as prompted.</p>
</li>
<li>
<p>When the Oracle Clusterware upgrade is complete, if an earlier version of Oracle Automatic Storage Management is installed, then the installer starts Oracle ASM Configuration Assistant (ASMCA) to upgrade Oracle ASM to 11.2. You can upgrade Oracle ASM at this time, or upgrade it later.</p>
<p>Oracle <a id="sthref534" name="sthref534"></a>recommends that you upgrade Oracle ASM at the same time that you upgrade Oracle Clusterware. Until Oracle ASM is upgraded, Oracle databases that use Oracle ASM cannot be created. Until Oracle ASM is upgraded, the Oracle ASM management tools in the Oracle Grid Infrastructure 11<span class="italic">g</span> release 2 (11.2) home (for example, <code>srvctl</code>) will not work.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
At the end of the upgrade, if you set the OCR backup location manually to the older release Oracle Clusterware home (CRS home), then you must change the OCR backup location to the Oracle grid infrastructure home (Grid home). If you did not set the OCR backup location manually, then this issue does not concern you.
<p>Because upgrades of Oracle Clusterware are out-of-place upgrades, the previous release Oracle Clusterware home cannot be the location of the OCR backups. Backups in the old Oracle Clusterware home could be deleted.</p>
</div>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDEBIID" name="CHDEBIID"></a><a id="CWWIN0001" name="CWWIN0001"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">D.6</span> Upgrading Oracle Automatic Storage Management</h2>
<p><a id="sthref535" name="sthref535"></a><a id="sthref536" name="sthref536"></a>After you have completed the Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) upgrade, if you did not choose to upgrade Oracle ASM when you upgraded Oracle Clusterware, then you can do it separately using the Oracle Automatic Storage Management Configuration Assistant (ASMCA) to perform rolling upgrades.</p>
<p>While you can use <code>asmca</code> to complete the upgrade of Oracle ASM separately, you should perform the upgrade as soon as possible after you upgrade Oracle Clusterware, because Oracle ASM management tools such as <code>srvctl</code> will not work until Oracle ASM has been upgraded.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
ASMCA performs a rolling upgrade only if the earlier version of Oracle ASM is either 11.1.0.6 or 11.1.0.7. Otherwise, ASMCA performs a normal upgrade, during which ASMCA brings down all Oracle ASM instances on all nodes of the cluster, and then brings them all up in the new Oracle Grid Infrastructure home.</div>
<div class="sect2"><a id="sthref537" name="sthref537"></a>
<h3 class="sect2"><span class="secnum">D.6.1</span> About Upgrading Oracle ASM</h3>
<p>Note the following if you intend to perform rolling upgrades of Oracle ASM:</p>
<ul>
<li>
<p>The active version of Oracle Clusterware must be 11<span class="italic">g</span> release 2 (11.2). To determine the active version, enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">C:\..\bin&gt; crsctl query crs activeversion
</pre></li>
<li>
<p>You must ensure that any rebalance operations on your existing Oracle ASM installation are completed before starting the upgrade.</p>
</li>
<li>
<p>During the upgrade process, you place the Oracle ASM instances in an upgrade mode. Because this upgrade mode limits Oracle ASM operations, you should complete the upgrades soon after you begin. The following are the operations allowed during Oracle ASM upgrade:</p>
<ul>
<li>
<p>Diskgroup mounts and dismounts</p>
</li>
<li>
<p>Opening, closing, resizing, or deleting database files</p>
</li>
<li>
<p>Recovering instances</p>
</li>
<li>
<p>Queries of fixed views and packages: Users are allowed to query fixed views and run anonymous PL/SQL blocks using fixed packages, such as <code>DBMS_DISKGROUP</code>)</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div class="sect2"><a id="sthref538" name="sthref538"></a>
<h3 class="sect2"><span class="secnum">D.6.2</span> Using ASMCA to Upgrade Oracle ASM</h3>
<p>Complete the following procedure to upgrade Oracle ASM:</p>
<ol>
<li>
<p>On the node on which you plan to start the upgrade, set the environment variable <code>ASMCA_ROLLING_UPGRADE</code> to <code>true</code> to put the Oracle ASM instances in upgrade mode:</p>
<pre xml:space="preserve" class="oac_no_warn">C:\&gt; set ASMCA_ROLLING_UPGRADE=true
</pre></li>
<li>
<p>From the Oracle Grid Infrastructure 11<span class="italic">g</span> release 2 (11.2) home, start ASMCA. For example:</p>
<pre xml:space="preserve" class="oac_no_warn">C:\&gt; cd app\oracle\grid\11.2.0.1\bin
C:\..\bin&gt; asmca.bat
</pre></li>
<li>
<p>In the ASMCA graphical interface, select <span class="bold">Upgrade</span>.</p>
<p>The Oracle ASM Configuration Assistant upgrades Oracle ASM in succession for all nodes in the cluster.</p>
</li>
<li>
<p>When the upgrade is complete for all the nodes, unset the environment variable <code>ASMCA_ROLLING_UPGRADE</code>:</p>
<pre xml:space="preserve" class="oac_no_warn">C:\&gt; set ASMCA_ROLLING_UPGRADE=
</pre></li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD" href="http://www.oracle.com/pls/db112/lookup?id=UPGRD"><span class="italic">Oracle Database Upgrade Guide</span></a> and <a class="olink OSTMG" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG"><span class="italic">Oracle Database Storage Administrator's Guide</span></a> for additional information about preparing an upgrade plan for Oracle ASM, and for starting, completing, and stopping Oracle ASM upgrades</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDBGGAE" name="CHDBGGAE"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">D.7</span> Updating DB Control and Grid Control Target Parameters</h2>
<p>Because Oracle Clusterware release 2 (11.2) is an out-of-place upgrade of the Oracle Clusterware home in a new location (the grid infrastructure for a cluster home, or Grid home), the path for the <code>CRS_HOME</code> parameter in some parameter files must be changed. If you do not change the parameter, then you will encounter errors such as "cluster target broken" on Enterprise Manager Database Control or Grid Control.</p>
<p>Use the following procedure to resolve this issue:</p>
<ol>
<li>
<p>Log in to Enterprise Manager Database Control or Enterprise Manager Grid Control.</p>
</li>
<li>
<p>Select the <span class="bold">Cluster</span> tab.</p>
</li>
<li>
<p>Click <span class="bold">Monitoring Configuration</span>.</p>
</li>
<li>
<p>Update the value for <span class="bold">Oracle Hom</span>e with the new path for the Oracle Grid Infrastructure home.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDDCHJI" name="CHDDCHJI"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">D.8</span> Downgrading Oracle Clusterware After an Upgrade</h2>
<p>After a successful or a failed upgrade to Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2), you can restore Oracle Clusterware to the previous version.</p>
<p>The restoration procedure in this section restores the Oracle Clusterware configuration to the state it was in before the Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) upgrade. Any configuration changes you performed during or after the 11<span class="italic">g</span> release 2 (11.2) upgrade are removed and cannot be recovered.</p>
<p>To restore Oracle Clusterware to the previous release:</p>
<ol>
<li>
<p>On all remote nodes, use the command syntax <code><span class="codeinlineitalic">Grid_home</span></code><code>\crs\install\rootcrs.pl</code> <code>-downgrade [-force]</code> to stop the Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) resources and shut down the Oracle Clusterware stack.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
<a id="sthref539" name="sthref539"></a>This command does not reset the OCR, or delete the <code>ocr</code> Windows Registry key.</div>
<p>For example:</p>
<pre xml:space="preserve" class="oac_no_warn">C:\app\grid\11.2.0.1\crs\install&gt; rootcrs.pl -downgrade
</pre>
<p>If you want to stop a partial or failed Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) upgrade and restore the previous release Oracle Clusterware, then use the <code>-force</code> flag with this command.</p>
</li>
<li>
<p>After the <code>rootcrs.pl -downgrade</code> script has completed on all remote nodes, on the local node use the command syntax <span class="italic">Grid_home</span><code>\crs\install \rootcrs.p</code>l <code>-downgrade -lastnode -oldcrshome</code> <code><span class="codeinlineitalic">pre11.2_crs_home</span></code> <code>-version</code> <code><span class="codeinlineitalic">pre11.2_crs_version</span></code> <code>[-force]</code>, where <code><span class="codeinlineitalic">pre11.2_crs_home</span></code> is the home of the earlier Oracle Clusterware installation, and <code><span class="codeinlineitalic">pre11.2_crs_version</span></code> is the release number of the earlier Oracle Clusterware installation.</p>
<p>For example:</p>
<pre xml:space="preserve" class="oac_no_warn">C:\app\grid\11.2.0.1\crs\install&gt; rootcrs.pl -downgrade -lastnode 
-oldcrshome C:\app\crs -version 11.1.0.6.0
</pre>
<p>This script downgrades the OCR, and removes binaries from the Grid home. If the Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) upgrade did not complete successfully, then to restore the previous release of Oracle Clusterware using the <code>-force</code> flag with this command.</p>
</li>
</ol>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<div class="footer">
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<col width="33%" />
<col width="*" />
<col width="33%" />
<tr>
<td align="left">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="concepts.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td style="font-size: 90%" align="center" class="copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
