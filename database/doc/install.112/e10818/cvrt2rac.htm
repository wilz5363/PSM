<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta http-equiv="Content-Language" content="en" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta name="robots" content="all" scheme="http://www.robotstxt.org/" />
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1" />
<meta name="Date" content="2010-03-15T18:13:37Z" />
<meta name="doctitle" content="Oracle&reg; Real Application Clusters Installation Guide 11g Release 2 (11.2) for Microsoft Windows" />
<meta name="partno" content="E10818-02" />
<meta name="docid" content="RIWIN" />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />
<link rel="Stylesheet" href="../../dcommon/css/blafdoc.css" title="Default" type="text/css" />
<script type="text/javascript" src="../../dcommon/js/doccd.js">
</script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="scripts.htm" title="Previous" type="text/html" />
<link rel="Next" href="apa.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10818.pdf" title="PDF version" type="application/pdf" />
<title>Converting to Oracle Real Application Clusters from Single-Instance Oracle Databases</title>
</head>
<body>
<div class="header">
<div class="zz-skip-header"><a name="top" id="top" href="#BEGIN">Skip Headers</a></div>
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top"><b>Oracle&reg; Real Application Clusters Installation Guide<br />
11<i>g</i> Release 2 (11.2) for Microsoft Windows</b><br />
Part Number E10818-02</td>
<td valign="bottom" align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="scripts.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="apa.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td align="right" valign="top" style="font-size: 90%"><a href="../e10818.pdf">View PDF</a></td>
</tr>
</table>
<a name="BEGIN" id="BEGIN"></a></div>
<div class="IND"><!-- End Header --><a id="BABBAHCH" name="BABBAHCH"></a><a id="RIWIN1106" name="RIWIN1106"></a>
<h1 class="appendix"><span class="secnum">C</span> Converting to Oracle Real Application Clusters from Single-Instance Oracle Databases</h1>
<p><a id="sthref483" name="sthref483"></a><a id="sthref484" name="sthref484"></a>This chapter describes the procedures for converting from Oracle Database 11<span class="italic">g</span> release 2 (11.2) single-instance databases to Oracle Real Application Clusters (Oracle RAC) databases.</p>
<p><a id="sthref485" name="sthref485"></a>If you are upgrading from Oracle Parallel Server to Oracle RAC, or from an earlier version of Oracle RAC, then use Oracle Database Upgrade Assistant (DBUA).</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
The procedures in this chapter assume that your original single-instance database and the target Oracle RAC database are using the same release, and running on the same platform.</div>
<p>This appendix contains the following topics:</p>
<ul>
<li>
<p><a href="#BABCEAIG">Administrative Issues for Converting Databases to Oracle RAC</a></p>
</li>
<li>
<p><a href="#BABBBDDB">Converting to Oracle RAC with DBCA</a></p>
</li>
<li>
<p><a href="#BABBAAEH">Preparing to Convert with rconfig and Oracle Enterprise Manager</a></p>
</li>
<li>
<p><a href="#BABGGEGJ">Converting Databases to Oracle RAC Using rconfig</a></p>
</li>
<li>
<p><a href="#BABCHDBB">Example of rconfig XML Input Files for ConvertToRAC</a></p>
</li>
<li>
<p><a href="#BABGBIEH">Post-Conversion Steps</a></p>
</li>
</ul>
<div class="infoboxnote">
<p class="notep1">Note:</p>
You must use clustered Oracle ASM instances for Oracle RAC databases.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBLIC" href="http://www.oracle.com/pls/db112/lookup?id=DBLIC"><span class="italic">Oracle Database Licensing Information</span></a> for compliance requirements that apply to the license you have purchased</div>
<a id="BABCEAIG" name="BABCEAIG"></a><a id="RIWIN1107" name="RIWIN1107"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">C.1</span> Administrative Issues for Converting Databases to Oracle RAC</h2>
<p>Note the following <a id="sthref486" name="sthref486"></a>administrative considerations before converting single-instance databases to Oracle RAC:</p>
<ul>
<li>
<p>A b<a id="sthref487" name="sthref487"></a>ackup of your existing database should available before converting from a single-instance Oracle Database to Oracle RAC and you should be ready to take a backup of your Oracle RAC database immediately following the conversion.</p>
</li>
<li>
<p>For <a id="sthref488" name="sthref488"></a>archiving with Oracle RAC environments, the archive file format requires a thread number.</p>
</li>
<li>
<p>The archived logs from all instances of an Oracle RAC database are required for media recovery. Because of this, if you archive to a file and you do not use a cluster file system, or some other means to provide shared file systems, then you require a method of accessing the archive logs from all nodes on which the cluster database has instances.</p>
</li>
<li>
<p>By default, all database files are migrated to Oracle-Managed Files (OMF). This feature simplifies tablespace creation, ensures datafile location consistency and compliance with OFA rules, and reduces human error with data file management.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="BABBBDDB" name="BABBBDDB"></a><a id="RIWIN1108" name="RIWIN1108"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">C.2</span> Converting to Oracle RAC with DBCA</h2>
<p>You can use Database Configuration Assistant to convert from single-instance Oracle databases to Oracle RAC. DBCA automates the configuration of the control file attributes, creates the undo tablespaces and the redo logs, and makes the initialization parameter file entries for cluster-enabled environments. It also configures Oracle Net Services, Oracle Clusterware resources, and the configuration for Oracle RAC database management for use by Oracle Enterprise Manager or the SRVCTL utility.</p>
<p>Before you use DBCA to convert a single-instance database to an Oracle RAC database, ensure that your system meets the following conditions: <a id="sthref489" name="sthref489"></a></p>
<ul>
<li>
<p>It is a supported hardware and operating system software configuration.</p>
</li>
<li>
<p>It has shared storage: either Oracle Cluster File System or Oracle ASM is available and accessible from all nodes.</p>
</li>
<li>
<p>Your applications have no design characteristics that preclude their use with cluster database processing.</p>
</li>
</ul>
<p><a id="sthref490" name="sthref490"></a>If your platform supports a cluster file system, then you can use it for Oracle RAC. You can also convert to Oracle RAC and use a non-shared file system. In either case, Oracle strongly recommends that you use Oracle Universal Installer (OUI) to perform an Oracle Database 11<span class="italic">g</span> release 2 (11.2) installation that sets up the Oracle home and inventory in an identical location on each of the selected nodes in your cluster.</p>
<p>This section describes the following scenarios:</p>
<ul>
<li>
<p><a href="#BABFIJEF">Converting Oracle Database 11<span class="italic">g</span> Installations to Oracle RAC Using DBCA</a></p>
</li>
<li>
<p><a href="#BABIECBB">Converting Single Instance on a Cluster to Oracle RAC using DBCA</a></p>
</li>
</ul>
<a id="BABFIJEF" name="BABFIJEF"></a><a id="RIWIN1109" name="RIWIN1109"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">C.2.1</span> Converting Oracle Database 11<span class="italic">g</span> Installations to Oracle RAC Using DBCA</h3>
<p>To convert from a single-instance Oracle Database that is on a <a id="sthref491" name="sthref491"></a>non-cluster computer to Oracle RAC, perform the procedures described in the following sections, and in the order shown:</p>
<ul>
<li>
<p><a href="#BABEEJHA">Back Up the Original Single-Instance Database</a></p>
</li>
<li>
<p><a href="#CHDJIBFB">Complete Oracle Clusterware Installation</a></p>
</li>
<li>
<p><a href="#BABCADHG">Validate the Cluster</a></p>
</li>
<li>
<p><a href="#BABDEBBI">Copy the Preconfigured Database Image</a></p>
</li>
<li>
<p><a href="#BABFFHCA">Install Oracle Database 11<span class="italic">g</span> Software with Oracle RAC</a></p>
</li>
</ul>
<a id="BABEEJHA" name="BABEEJHA"></a><a id="RIWIN1110" name="RIWIN1110"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">C.2.1.1</span> Back Up the Original Single-Instance Database</h4>
<p>Use DBCA to create a preconfigured image of your single-instance database by using the following procedure:</p>
<ol>
<li>
<p>Navigate to the <code>bin</code> directory in <code><span class="codeinlineitalic">Oracle_home</span></code>, and start DBCA.</p>
</li>
<li>
<p>At the Welcome page, click <span class="bold">Next</span>.</p>
</li>
<li>
<p>On the Operations page, select <span class="bold">Manage Templates</span>, and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>On the Template Management page, select <span class="bold">Create a database template</span> and <span class="bold">From an existing database (structure as well as data)</span>, and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>On the Source Database page, select the database name in the <span class="bold">Database instance</span> list, and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>On the Template Properties page, enter a name for your template in the <span class="bold">Name</span> field. Oracle recommends that you use the database name.</p>
<p>By default, the template files are generated in the directory <code><span class="codeinlineitalic">Oracle_home</span></code><code>\assistants\dbca\templates</code>. You can enter a description of the file in the <span class="bold">Description</span> field and change the template file location in the <span class="bold">Template data file</span> field.</p>
<p>When you have completed entries, click <span class="bold">Next</span>.</p>
</li>
<li>
<p>On the Location of Database Related Files page, select <span class="bold">Maintain the file locations</span>, so that you can restore the database to the current directory structure, and click <span class="bold">Finish</span>.</p>
</li>
</ol>
<p>DBCA generates two files: a database structure file (<code><span class="codeinlineitalic">template_name</span></code><code>.dbc</code>), and a database preconfigured image file (<code><span class="codeinlineitalic">template_name</span></code><code>.dfb</code>).</p>
</div>
<!-- class="sect3" -->
<a id="CHDJIBFB" name="CHDJIBFB"></a><a id="RIWIN1111" name="RIWIN1111"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">C.2.1.2</span> Complete Oracle Clusterware Installation</h4>
<p>Complete Oracle Clusterware installation, as described in <a class="olink GINST" href="http://www.oracle.com/pls/db112/lookup?id=GINST"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for your platform.</p>
</div>
<!-- class="sect3" -->
<a id="BABCADHG" name="BABCADHG"></a><a id="RIWIN1112" name="RIWIN1112"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">C.2.1.3</span> Validate the Cluster</h4>
<p>Validate the cluster configuration using the Cluster Verification Utility.</p>
</div>
<!-- class="sect3" -->
<a id="BABDEBBI" name="BABDEBBI"></a><a id="RIWIN1113" name="RIWIN1113"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">C.2.1.4</span> Copy the Preconfigured Database Image</h4>
<p>Copy the preconfigured database image. This includes copying the database structure <code>*.dbc</code> file and the database preconfigured image <code>*.dfb</code> file that DBCA created in the previous procedure <a href="#BABEEJHA">"Back Up the Original Single-Instance Database"</a> to a temporary location on the node in the cluster from which you plan to run DBCA.</p>
</div>
<!-- class="sect3" -->
<a id="BABFFHCA" name="BABFFHCA"></a><a id="RIWIN1114" name="RIWIN1114"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">C.2.1.5</span> Install Oracle Database 11<span class="italic">g</span> Software with Oracle RAC</h4>
<ol>
<li>
<p>Run OUI to perform an Oracle Database installation with Oracle RAC.</p>
</li>
<li>
<p>Select <span class="bold">Cluster Installation Mode</span> on the Specify Hardware Cluster Installation page of OUI, and select the nodes to include in your Oracle RAC database.</p>
</li>
<li>
<p>On the OUI Database Configuration Types page, select the <span class="bold">Advanced</span> install type.</p>
<p>After installing the Oracle Database software, OUI runs postinstallation configuration tools, such as Network Configuration Assistant (NETCA), DBCA, and so on.</p>
</li>
<li>
<p>On the DBCA Template Selection page, use the template that you copied to a temporary location in the <a href="#BABDEBBI">"Copy the Preconfigured Database Image"</a> procedure. Use the browse option to select the template location.</p>
</li>
<li>
<p>If you selected raw storage on the OUI Storage Options page, then on the DBCA File Locations Tab on the Initialization Parameters page, replace the data files, control files, and log files, and so on, with the corresponding raw device files if you have not set up the <code>DBCA_RAW_CONFIG</code> environment variable. You must also replace default database files with raw devices on the Storage page.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbcacrea.htm#BGBIJGDA">Chapter 3, "Creating Oracle Real Application Clusters Databases with Database Configuration Assistant"</a> for more details about DBCA</div>
</li>
<li>
<p>After creating the Oracle RAC database, DBCA displays the Password Management page on which you must change the passwords for database privileged users who have <code>SYSDBA</code> and <code>SYSOPER</code> roles. When DBCA exits, the conversion process is complete.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NTQRF130" href="../../win.112/e10845/external.htm#NTQRF130"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> for more information about configuring user roles</div>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BABIECBB" name="BABIECBB"></a><a id="RIWIN1115" name="RIWIN1115"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">C.2.2</span> Converting Single Instance on a Cluster to Oracle RAC using DBCA</h3>
<p>There are three scenarios in which a <a id="sthref492" name="sthref492"></a>single-instance database can exist on a cluster computer:</p>
<ul>
<li>
<p>Scenario 1: The Oracle home from which the single-instance database is running is cluster-installed. The steps to perform a conversion to Oracle RAC in this scenario are described in <a href="#BABDGBAA">"Single Instance Database on a Cluster Running from a Cluster-Enabled Oracle Home"</a>.</p>
</li>
<li>
<p>Scenario 2: The Oracle home from which the single-instance database is running is cluster-installed, but the Oracle RAC feature is disabled.</p>
</li>
<li>
<p>Scenario 3: The Oracle home from which the single-instance database is running is not cluster-installed. The procedure to convert the single-instance database to Oracle RAC in this scenario is described in <a href="#BABEEFCC">"Single Instance Database on a Cluster Running from a Single-Instance Installed Oracle Home"</a>.</p>
</li>
</ul>
<a id="BABDGBAA" name="BABDGBAA"></a><a id="RIWIN1116" name="RIWIN1116"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">C.2.2.1</span> Single Instance Database on a Cluster Running from a Cluster-Enabled Oracle Home</h4>
<p>Perform the following procedures to convert a single-instance database on a cluster running from a cluster-installed (Oracle Database 11<span class="italic">g</span> with Oracle RAC) Oracle home.</p>
<ol>
<li><a id="BABJJHIA" name="BABJJHIA"></a>
<p>Use DBCA to create a preconfigured image of your single-instance database as described in the section <a href="#BABEEJHA">"Back Up the Original Single-Instance Database"</a>. To perform the conversion manually, shut down the single-instance database.</p>
</li>
<li><a id="BABDIHDF" name="BABDIHDF"></a>
<p>To add nodes to your cluster, add and connect these nodes to the cluster as described in <a class="olink GINST" href="http://www.oracle.com/pls/db112/lookup?id=GINST"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for your platform. Ensure that all of these nodes can access the shared storage. Also, extend the Oracle Clusterware home to the new nodes using the procedures for "Adding and Deleting Cluster Nodes on Windows Systems" as described in <a class="olink CWADD1167" href="http://www.oracle.com/pls/db112/lookup?id=CWADD1167"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a>.</p>
</li>
<li>
<p>From one of the newly added nodes, configure the listeners on the additional nodes using NETCA. Choose the same port number and protocol that you used on the existing node. If NETCA displays the existing node in the node list page, then do not select this node, because the listener is already configured on it.</p>
</li>
<li>
<p>Convert the database using one of the following procedures:</p>
<ul>
<li>
<p><a href="#BABCFCFG">Automated Conversion Procedure Using DBCA</a></p>
</li>
<li>
<p><a href="#BABBECGJ">Manual Conversion Procedure</a></p>
</li>
</ul>
</li>
</ol>
<a id="BABCFCFG" name="BABCFCFG"></a><a id="RIWIN1117" name="RIWIN1117"></a>
<div class="sect4">
<h5 class="sect4"><span class="secnum">C.2.2.1.1</span> Automated Conversion Procedure Using DBCA</h5>
<ol>
<li>
<p>If you created the preconfigured image of the single instance database as described in the section <a href="#BABEEJHA">"Back Up the Original Single-Instance Database"</a>, then use DBCA to complete the conversion to an Oracle RAC database.</p>
</li>
<li>
<p>Start DBCA from the initial node. Select the names of the nodes that you want to include as part of your cluster database. On the Template Selection page, select the preconfigured template that you created in Step <a href="#BABJJHIA">1</a>. Enter the database name and respond to the remaining DBCA prompts.</p>
</li>
<li><a id="i1021974" name="i1021974"></a>
<p>To use raw devices for the cluster database files:</p>
<ol>
<li>
<p>When the Initialization Parameters page appears, enter the raw device name for the SPFILE on the File Locations tab.</p>
</li>
<li>
<p>On the Storage page, replace the default database file names with the raw devices for the control files, redo logs, and data files to create the cluster database.</p>
</li>
<li>
<p>Click <span class="bold">Finish,</span> and create the database.</p>
</li>
</ol>
</li>
</ol>
<p>After creating the Oracle RAC database, DBCA displays the Password Management page on which you must change the passwords for the database privileged users who have <code>SYSDBA</code> and <code>SYSOPER</code> roles. When DBCA exits, the conversion process is complete.</p>
</div>
<!-- class="sect4" -->
<a id="BABBECGJ" name="BABBECGJ"></a><a id="RIWIN1118" name="RIWIN1118"></a>
<div class="sect4">
<h5 class="sect4"><span class="secnum">C.2.2.1.2</span> Manual Conversion Procedure</h5>
<p>Because you did not use DBCA to create a preconfigured image of your single-instance database in step <a href="#BABJJHIA">1</a>, perform the following steps to complete the conversion:</p>
<a id="i1021981" name="i1021981"></a>
<ol>
<li>
<p>Create the Optimal Flexible Architecture (OFA) directory structure on each of the nodes that you have added.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="apa.htm#CDEBJEFD">"Directory Structures for Oracle RAC"</a> for more information about OFA</div>
</li>
<li>
<p>If you are converting single-instance database files on a file system to raw devices, then copy the database data files, control files, redo logs, and server parameter file to their corresponding raw devices using the OCOPY command. Otherwise, continue to the next step.</p>
</li>
<li>
<p>Re-create the control files by running the <code>CREATE CONTROLFILE</code> SQL statement with the <code>REUSE</code> keyword and specify <code>MAXINSTANCES</code> and <code>MAXLOGFILES</code>, and so on, as needed for your Oracle RAC configuration. The <code>MAXINSTANCES</code> recommended default is 32.</p>
</li>
<li>
<p>Shut down the database instance.</p>
</li>
<li><a id="BABDDHBH" name="BABDDHBH"></a>
<p>If your single-instance database was using an SPFILE, then create a temporary PFILE from the SPFILE using the following SQL statement:</p>
<pre xml:space="preserve" class="oac_no_warn">CREATE PFILE='pfile_name' from spfile='spfile_name'
</pre></li>
<li>
<p>Set the <code>CLUSTER_DATABASE</code> parameter to <code>TRUE</code>, set the <code>INSTANCE_NUMBER</code> parameter to a unique value for each instance, using a <code><span class="codeinlineitalic">sid</span></code><code>.</code><code><span class="codeinlineitalic">parameter</span></code><code>=</code><code><span class="codeinlineitalic">value</span></code> syntax.</p>
<p>If you optimized memory usage on your single-instance database, then adjust the size of the system global area (SGA) to avoid swapping and paging when you convert to Oracle RAC. You should make this adjustment because Oracle RAC requires about 350 bytes for each buffer to accommodate the Global Cache Service (GCS). For example, if you have 10,000 buffers, then Oracle RAC requires about 350 multiplied by 10,000 bytes more memory. Therefore, adjust the size of the SGA by changing the <code>DB_CACHE_SIZE</code> and <code>DB_nK_CACHE_SIZE</code> parameters accordingly.</p>
</li>
<li>
<p>Start up the database instance using the PFILE created in step <a href="#BABDDHBH">5</a>.</p>
</li>
<li>
<p>If your single-instance database was using automatic undo management, then create an undo tablespace for each additional instance using the <code>CREATE UNDO TABLESPACE</code> SQL statement. If you are using raw devices, then ensure that the data file for the undo tablespace is on the raw device.</p>
</li>
<li>
<p>Create redo threads that have at least two redo logs for each additional instance. If you are using raw devices, then ensure that the redo log files are on raw devices. Enable the new redo threads by using an <code>ALTER DATABASE</code> SQL statement. Then, shut down the database instance.</p>
</li>
<li>
<p>Copy the Oracle password file from the initial node, or from the node on which you are working, to the corresponding location on the additional nodes on which the cluster database will have an instance. Replace the <code>ORACLE_SID</code> name in each password file appropriately for each additional instance.</p>
</li>
<li>
<p>Set the <code>REMOTE_LISTENER</code> parameter to the single client access name (SCAN) port and SCAN.</p>
</li>
<li>
<p>Create the SPFILE from the PFILE using the procedures in the section <a href="params.htm#CIHICJBD">"Migrating to the SPFILE in Oracle RAC Environments"</a>. If you are not using Oracle Automatic Storage Management (Oracle ASM) or a cluster file system, then ensure that the SPFILE is on a raw device that is accessible from every node in the cluster.</p>
</li>
<li>
<p>Create the <code><span class="codeinlineitalic">Oracle_home</span></code><code>\dbs\init</code><code><span class="codeinlineitalic">sid</span></code><code>.ora</code> file that contains the following entry:</p>
<pre xml:space="preserve" class="oac_no_warn">spfile=<span class="italic">'spfile_path_name</span>'
</pre>
<p>In this example, <code><span class="codeinlineitalic">spfile_path_name</span></code> is the complete path name of the SPFILE.</p>
</li>
<li>
<p>On the local node, run <code>catclust.sql</code>. This command creates the dictionary views needed for Oracle RAC databases. For example:</p>
<pre xml:space="preserve" class="oac_no_warn">SQL&gt; start <span class="italic">Oracle_home</span>\RDBMS\ADMIN\catclust.sql
</pre></li>
<li>
<p>Add the configuration for the Oracle RAC database and its instance-to-node mapping using SRVCTL.</p>
<pre xml:space="preserve" class="oac_no_warn">srvctl add database -d <span class="italic">db_name</span> -o <span class="italic">Oracle_home</span> -p <span class="italic">spfile_path_name</span>
srvctl add instance -d <span class="italic">db_name</span> -i <span class="italic">inst1_name</span> -n <span class="italic">node1_name</span>
srvctl add instance -d <span class="italic">db_name</span> -i <span class="italic">inst2_name</span> -n <span class="italic">node2_name</span>
</pre></li>
<li>
<p>Start the Oracle RAC database using SRVCTL.</p>
<pre xml:space="preserve" class="oac_no_warn">srvctl start database -d <span class="italic">db_name</span>
</pre></li>
</ol>
<p>After starting the database with SRVCTL, your conversion process is complete and, for example, you can run the following SQL statement to see the status of all the instances in your Oracle RAC database:</p>
<pre xml:space="preserve" class="oac_no_warn">SQL&gt; select * from v$active_instances
</pre></div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="BABEEFCC" name="BABEEFCC"></a><a id="RIWIN1120" name="RIWIN1120"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">C.2.2.2</span> Single Instance Database on a Cluster Running from a Single-Instance Installed Oracle Home</h4>
<p>You can only install a single instance on a cluster running from a single-instance installed Oracle home if you selected the local installation option on the OUI Specify Hardware Cluster Installation page during the single-instance Oracle Database 11<span class="italic">g</span> release 2 (11.2) installation.</p>
<p>To convert this type of database to an Oracle RAC database, perform the procedures described in the following sections:</p>
<ol>
<li>
<p><a href="#BABEEJHA">"Back Up the Original Single-Instance Database"</a>.</p>
</li>
<li>
<p><a href="#CHDJIBFB">"Complete Oracle Clusterware Installation"</a>.</p>
</li>
<li>
<p><a href="#BABCADHG">"Validate the Cluster"</a>.</p>
</li>
<li>
<p><a href="#BABFFHCA">"Install Oracle Database 11<span class="italic">g</span> Software with Oracle RAC"</a>. In this step, make sure that you select a new Oracle home other than the one from which the single-instance database was running.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABBAAEH" name="BABBAAEH"></a><a id="RIWIN1121" name="RIWIN1121"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">C.3</span> Preparing to Convert with rconfig and Oracle Enterprise Manager<a id="sthref493" name="sthref493"></a><a id="sthref494" name="sthref494"></a><a id="sthref495" name="sthref495"></a></h2>
<p>You can use <code>rconfig</code>, or Oracle Enterprise Manager to assist you with the task of converting a single-instance database installation to an Oracle RAC database. The first of these, <code>rconfig</code>, is a command line utility. Oracle Enterprise Manager Grid Control database administration option, Convert to Cluster Database, provides a GUI conversion tool. The following sections describe how to use these conversion tools:</p>
<ul>
<li>
<p><a href="#BABGEEEG">Prerequisites for Converting to Oracle RAC Databases</a></p>
</li>
<li>
<p><a href="#BABDDBHB">Configuration Changes during Oracle RAC Conversion Using rconfig</a></p>
</li>
<li>
<p><a href="#BABFCAHF">Converting Databases to Oracle RAC Using rconfig or Oracle Enterprise Manager</a></p>
</li>
<li>
<p><a href="#BABCDIBJ">Converting Databases to Oracle RAC Using Oracle Enterprise Manager</a></p>
</li>
</ul>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Before you start the conversion, back up your existing database, as you should do before starting any major change to your database.</div>
<a id="BABGEEEG" name="BABGEEEG"></a><a id="RIWIN1122" name="RIWIN1122"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">C.3.1</span> Prerequisites for Converting to Oracle RAC Databases</h3>
<p>Before you convert a single-instance database to an Oracle RAC database, ensure that the following conditions are met for each cluster node that you intend to make an Oracle RAC database node:</p>
<ul>
<li>
<p>Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) is installed, configured, and running.</p>
</li>
<li>
<p>Oracle RAC 11<span class="italic">g</span> release 2 (11.2) software is installed.</p>
</li>
<li>
<p>The Oracle binary is enabled for Oracle RAC.</p>
</li>
<li>
<p>Shared storage, either Oracle Cluster File System or Oracle ASM, is available and accessible from all nodes.</p>
</li>
<li>
<p>User equivalence exists for the <code>oracle</code> account, or the user account used to install the Oracle software.</p>
</li>
<li>
<p>If you intend to use Oracle Enterprise Manager, then all Oracle Enterprise Manager agents are configured and running, and are configured with cluster and host information.</p>
</li>
<li>
<p>You have backed up your existing database.</p>
</li>
</ul>
<div class="infoboxnote">
<p class="notep1">Note:</p>
You must use clustered Oracle ASM instances for Oracle RAC databases. Oracle ASM is installed with the Oracle Grid infrastructure software.</div>
</div>
<!-- class="sect2" -->
<a id="BABDDBHB" name="BABDDBHB"></a><a id="RIWIN1123" name="RIWIN1123"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">C.3.2</span> Configuration Changes during Oracle RAC Conversion Using rconfig</h3>
<p>Note the following changes that occur when you convert a single-instance database to Oracle RAC using <code>rconfig</code>:</p>
<ul>
<li>
<p>During the conversion, <code>rconfig</code> places the target Oracle RAC database into archive log mode, and enables archiving for the database. If you do not plan to use archivelog space, then you can disable archive logging after the conversion has completed.</p>
</li>
<li>
<p>For the <span class="bold">Shared Storage Type</span> value, if you enter <span class="bold">CFS</span>, and you use a cluster file system for your single-instance database storage, then <code>rconfig</code> converts the environment to use Oracle Managed Files (OMF) for database storage, and places the datafiles in a subdirectory located under the shared storage location.</p>
</li>
<li>
<p>During the conversion, <code>rconfig</code> moves database files to a specified shared location, and configures them using OMF.</p>
<p>If you want to avoid using OMF with your converted database, then the single-instance database files must already be located in a shared file system, and you must indicate that <code>rconfig</code> should not move the files.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABFCAHF" name="BABFCAHF"></a><a id="RIWIN1124" name="RIWIN1124"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">C.3.3</span> Converting Databases to Oracle RAC Using rconfig or Oracle Enterprise Manager</h3>
<p>The following is a list of scenarios for converting a single-instance Oracle database to an Oracle RAC database:</p>
<ul>
<li>
<p>Converting a single-instance Oracle Database 11<span class="italic">g</span> release 2 (11.2) to an Oracle RAC 11<span class="italic">g</span> release 2 (11.2) database, running out of the <span class="italic">same</span> Oracle home and using the same data files as the single-instance database.</p>
<p>In this scenario, either use the <code>rconfig</code> utility, or use the <span class="bold">Convert to RAC</span> option on the single-instance database target of Oracle Enterprise Manager Grid Control.</p>
</li>
<li>
<p>Converting a single-instance Oracle Database version previous to Oracle RAC 11<span class="italic">g</span> release 2 (11.2), running out of the same Oracle home and using the same data files as the single-instance database</p>
<p>In this scenario, use OUI and Database Upgrade Assistant (DBUA) to update the single-instance database to Oracle Database 11<span class="italic">g</span> release 2 (11.2). Then use <code>rconfig</code> or the Oracle Enterprise Manager <span class="bold">Convert to RAC</span> option, as described in the preceding scenario.</p>
</li>
<li>
<p>Converting a single-instance Oracle Database 11<span class="italic">g</span> release 2 (11.2) to an Oracle RAC 11<span class="italic">g</span> release 2 (11.2) database, running out of a <span class="italic">different</span> Oracle home and using the same data files as the single-instance database.</p>
<p>In this scenario, either use the <code>rconfig</code> utility in the source database home (the database that you are converting), or use the <span class="bold">Convert to RAC</span> option in the single-instance database target of Oracle Enterprise Manager Grid Control. Provide the file storage location when prompted.</p>
</li>
<li>
<p>Converting a single-instance Oracle Database 11<span class="italic">g</span> release 2 (11.2) to an Oracle RAC 11<span class="italic">g</span> release 2 (11.2) database, running out of a <span class="italic">different</span> Oracle home, and where the host where the single-instance database is running is <span class="italic">not</span> one of the nodes of the Oracle RAC database.</p>
<p>In this scenario, create a clone image of the single-instance database, and move the clone image to a host that is one of the nodes of the cluster. Then use <code>rconfig</code> or the Oracle Enterprise Manager <span class="bold">Convert to RAC</span> option, as described in the preceding scenario.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABCDIBJ" name="BABCDIBJ"></a><a id="RIWIN1125" name="RIWIN1125"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">C.3.4</span> Converting Databases to Oracle RAC Using Oracle Enterprise Manager<a id="sthref496" name="sthref496"></a><a id="sthref497" name="sthref497"></a><a id="sthref498" name="sthref498"></a></h3>
<p>You can use Oracle Enterprise Manager Grid Control to convert a single-instance database to Oracle RAC. To use this feature, complete the following steps:</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD" href="http://www.oracle.com/pls/db112/lookup?id=UPGRD"><span class="italic">Oracle Database Upgrade Guide</span></a> for information about upgrading existing Oracle Database installations</div>
<ol>
<li>
<p>Log in to Grid Control. From the Grid Control Home page, click the <span class="bold">Targets</span> tab.</p>
</li>
<li>
<p>On the Targets page, click the <span class="bold">Databases</span> secondary tab, and click the link in the Names column of the database that you want to convert to Oracle RAC.</p>
</li>
<li>
<p>On the Database Instance Home page, click the <span class="bold">Change Database</span> secondary tab.</p>
</li>
<li>
<p>On the Administration page, in the Database Administration Change Database section, click <span class="bold">Convert to Cluster Database</span>.</p>
</li>
<li>
<p>Log in as the database user <code>SYS</code> with <code>SYSDBA</code> privileges to the database you want to convert, and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>On the Convert to Cluster Database: Cluster Credentials page, provide a user name and password for the <code>oracle</code> user and password of the target database that you want to convert. If the target database is using Oracle ASM, then also provide the <code>SYSASM</code> user and password, and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>On the Hosts screen, select the host nodes in the cluster that you want to be cluster members in the installed Oracle RAC database. When you have completed your selection, click <span class="bold">Next</span>.</p>
</li>
<li>
<p>On the Convert to Database: Options page, select whether you want to use the existing listener and port number, or specify a new listener and port number for the cluster. Also provide a prefix for cluster database instances on the cluster.</p>
<p>When you have finished entering information, click <span class="bold">Next</span>, or click <span class="bold">Help</span> if you need assistance in deciding how to enter information.</p>
</li>
<li>
<p>On the Convert to Cluster Database: Shared Storage page, either select the option to use your existing shared storage area, or select the option to have your database files copied to a new shared storage location. Also, decide if you want to use your existing Fast Recovery Area, or if you want to copy your Flash Recovery files to a new <a id="sthref499" name="sthref499"></a>Fast Recovery Area using files managed by Oracle Database.</p>
<p>If you use Oracle ASM, then Oracle recommends that you place the database area and the recovery area in separate failure groups. If you do not use Oracle ASM, then Oracle recommends that the data files and the Fast Recovery Area are located on separate locations, as with separate Oracle ASM failure groups, so that a hardware failure does not affect availability.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OSTMG10046" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG10046"><span class="italic">Oracle Database Storage Administrator's Guide</span></a> for more information about failure groups</div>
<p>When you have finished entering information, click <span class="bold">Next</span>, or click <span class="bold">Help</span> if you need assistance in deciding how to enter information.</p>
</li>
<li>
<p>On the Convert to Cluster Database: Review page, review the options you have selected. Click <span class="bold">Submit Job</span> if you want to proceed with the conversion. If you want to change any of the options you have selected, then click <span class="bold">Back</span>. To cancel the conversion, click <span class="bold">Cancel</span>.</p>
</li>
<li>
<p>On the Confirmation page, click <span class="bold">View Job</span> to check the status of the conversion.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABGGEGJ" name="BABGGEGJ"></a><a id="RIWIN1126" name="RIWIN1126"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">C.4</span> Converting Databases to Oracle RAC Using rconfig</h2>
<p>You can use the command line utility <code>rconfig</code> to convert a single-instance database to Oracle RAC. To use this feature, complete the following steps:</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD" href="http://www.oracle.com/pls/db112/lookup?id=UPGRD"><span class="italic">Oracle Database Upgrade Guide</span></a> for information about upgrading existing Oracle Database installations</div>
<ol>
<li>
<p>As the <code>oracle</code> user, navigate to the directory <code><span class="codeinlineitalic">Oracle_home</span></code><code>\assistants\rconfig\sampleXMLs</code>, and open the file <code>ConvertToRAC.xml</code> using a text editor.</p>
</li>
<li><a id="BABIACDI" name="BABIACDI"></a>
<p>Review the <code>ConvertToRAC.xml</code> file, and modify the parameters as required for your system. The XML sample file contains comment lines that provide instructions for how to configure the file.</p>
<div class="infoboxnote">
<p class="notep1">Caution:</p>
Set the convert option <code>Convert verify="ONLY"</code> to perform a test conversion to ensure that a conversion can be completed successfully.</div>
<p>When you have completed making changes, save the file with the syntax <code><span class="codeinlineitalic">filename</span></code><code>.xml</code>. Make a note of the name you select.</p>
</li>
<li>
<p>Navigate to the directory <code><span class="codeinlineitalic">Oracle_home</span></code><code>\bin</code>, and use the following syntax to run the command <code>rconfig</code>:</p>
<pre xml:space="preserve" class="oac_no_warn">rconfig <span class="italic">input.xml</span>
</pre>
<p>where <code><span class="codeinlineitalic">input.xml</span></code> is the name of the XML input file you configured in Step <a href="#BABIACDI">2</a>.</p>
<p>For example, if you create an input XML file called <code>convert.xml</code>, then enter the following command</p>
<pre xml:space="preserve" class="oac_no_warn">C:\...\bin&gt; rconfig.bat convert.xml
</pre></li>
</ol>
<div class="infoboxnote">
<p class="notep1">Note:</p>
The <code>Convert verify</code> option in the <code>ConvertToRAC.xml</code> file has three options:
<ul>
<li>
<p><code>Convert verify="YES"</code>: <code>rconfig</code> performs checks to ensure that the prerequisites for single-instance to Oracle RAC conversion have been met before it starts conversion</p>
</li>
<li>
<p><code>Convert verify="NO"</code>: <code>rconfig</code> does not perform prerequisite checks, and starts conversion</p>
</li>
<li>
<p><code>Convert verify="ONLY"</code> <code>rconfig</code> only performs prerequisite checks; it does not start conversion after completing prerequisite checks</p>
</li>
</ul>
</div>
<p>If performing the conversion fails, then use the following procedure to recover and reattempt the conversion:</p>
<ol>
<li>
<p>Attempt to delete the database using the DBCA delete database option.</p>
</li>
<li>
<p>Restore the source database.</p>
</li>
<li>
<p>Review the conversion log, and fix any problems reported by <code>rconfig</code> that may have caused the conversion failure. The <code>rconfig</code> log files are under the <code>rconfig</code> directory in %ORACLE_BASE%\cfgtoollogs.</p>
</li>
<li>
<p>Reattempt the conversion.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BABCHDBB" name="BABCHDBB"></a><a id="RIWIN1127" name="RIWIN1127"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">C.5</span> Example of rconfig XML Input Files for ConvertToRAC</h2>
<p><a id="sthref500" name="sthref500"></a>The following are two examples of an XML <code>ConvertToRAC</code> input file for the <code>rconfig</code> utility. <a href="#BABDFFAH">Example C-1</a> is an XML input file to convert a single-instance database with Oracle ASM to a policy-managed Oracle RAC database (using server pools) on Oracle ASM storage. <a href="#BABFGHCI">Example C-2</a> is an XML input file to convert a single-instance database with Oracle ASM to an administrator-managed Oracle RAC database.</p>
<div class="example"><a id="BABDFFAH" name="BABDFFAH"></a><a id="RIWIN1128" name="RIWIN1128"></a>
<p class="titleinexample">Example C-1 rconfig ConvertToRAC for Policy-Managed Database</p>
<pre xml:space="preserve" class="oac_no_warn">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;n:RConfig xmlns:n="http://www.oracle.com/rconfig"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://www.oracle.com/rconfig"&gt;
    &lt;n:ConvertToRAC&gt;   
&lt;!-- Verify does a precheck to ensure all pre-requisites are met, before the conversion is attempted. Allowable values are: YES|NO|ONLY --&gt;
        &lt;n:Convert verify="YES"&gt;
&lt;!--Specify current OracleHome of non-rac database for SourceDBHome --&gt;
              &lt;n:SourceDBHome&gt;C:\app\oracle\product\11.2.0\db_1&lt;/n:SourceDBHome&gt;
&lt;!--Specify OracleHome where the rac database should be configured. It can be same as SourceDBHome --&gt;
              &lt;n:TargetDBHome&gt;C:\app\oracle\product\11.2.0\db_1&lt;/n:TargetDBHome&gt;
&lt;!--Specify SID of non-rac database and credential. User with sysdba role is required to perform conversion --&gt;
              &lt;n:SourceDBInfo SID="sales"&gt;
                &lt;n:Credentials&gt;
                  &lt;n:User&gt;sys&lt;/n:User&gt;
                  &lt;n:Password&gt;oracle&lt;/n:Password&gt;
                  &lt;n:Role&gt;sysdba&lt;/n:Role&gt;
                &lt;/n:Credentials&gt;
              &lt;/n:SourceDBInfo&gt;
&lt;!--Specify the list of existing or new server pools which will be used by the Policy Managed Cluster Database. --&gt;
              &lt;n:ServerPoolList&gt;
                &lt;n:ExistingServerPool name="custom"/&gt;
                &lt;n:NewServerPool name="newpool" cardinality="2"/&gt;
              &lt;/n:ServerPoolList&gt;
&lt;!--InstancePrefix is not required for Policy Managed database. If specified, it will be ignored. Instance names are generated automatically based on db_unique_name for Policy Managed dababase.--&gt;
&lt;!-- Listener details are no longer needed starting 11.2. Database is registered with default listener and SCAN listener running from Oracle Grid Infrastructure home. --&gt;
&lt;!--Specify the type of storage to be used by rac database. Allowable values are CFS|ASM. The non-rac database should have same storage type. ASM credentials are no needed for conversion. --&gt;
              &lt;n:SharedStorage type="ASM"&gt;
&lt;!--Specify Database Area Location to be configured for rac database.If this field is left empty, current storage will be used for rac database. For CFS, this field will have directory path. --&gt;
                &lt;n:TargetDatabaseArea&gt;+ASMDG&lt;/n:TargetDatabaseArea&gt;
&lt;!--Specify Flash Recovery Area to be configured for rac database. If this field is left empty, current recovery area of non-rac database will be configured for rac database. If current database is not using recovery Area, the resulting rac database will not have a recovery area. --&gt;
                &lt;n:TargetFlashRecoveryArea&gt;+ASMDG&lt;/n:TargetFlashRecoveryArea&gt;
              &lt;/n:SharedStorage&gt;
        &lt;/n:Convert&gt;
    &lt;/n:ConvertToRAC&gt;
&lt;/n:RConfig&gt;
</pre></div>
<!-- class="example" -->
<div class="example"><a id="BABFGHCI" name="BABFGHCI"></a><a id="RIWIN1129" name="RIWIN1129"></a>
<p class="titleinexample">Example C-2 rconfig ConvertToRAC for Administrator-Managed Database</p>
<pre xml:space="preserve" class="oac_no_warn">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;n:RConfig xmlns:n="http://www.oracle.com/rconfig"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://www.oracle.com/rconfig"&gt;
    &lt;n:ConvertToRAC&gt;   
&lt;!-- Verify does a precheck to ensure all pre-requisites are met, before the conversion is attempted. Allowable values are: YES|NO|ONLY --&gt;
        &lt;n:Convert verify="YES"&gt;
&lt;!--Specify current OracleHome of non-rac database for SourceDBHome --&gt;
              &lt;n:SourceDBHome&gt;C:\app\oracle\product\11.2.0\db_1&lt;/n:SourceDBHome&gt;
&lt;!--Specify OracleHome where the rac database should be configured. It can be same as SourceDBHome --&gt;
              &lt;n:TargetDBHome&gt;C:\app\oracle\product\11.2.0\db_1&lt;/n:TargetDBHome&gt;
&lt;!--Specify SID of non-rac database and credential. User with sysdba role is required to perform conversion --&gt;
              &lt;n:SourceDBInfo SID="sales"&gt;
                &lt;n:Credentials&gt;
                  &lt;n:User&gt;sys&lt;/n:User&gt;
                  &lt;n:Password&gt;oracle&lt;/n:Password&gt;
                  &lt;n:Role&gt;sysdba&lt;/n:Role&gt;
                &lt;/n:Credentials&gt;
              &lt;/n:SourceDBInfo&gt;
&lt;!--Specify the list of nodes that should have rac instances running for the Admin Managed Cluster Database. LocalNode should be the first node in this nodelist. --&gt;
              &lt;n:NodeList&gt;        
                &lt;n:Node name="node1"/&gt;
                &lt;n:Node name="node2"/&gt;
              &lt;/n:NodeList&gt;
&lt;!--Instance Prefix tag is optional starting with 11.2. If left empty, it is derived from db_unique_name.--&gt;
              &lt;n:InstancePrefix&gt;sales&lt;/n:InstancePrefix&gt;
&lt;!-- Listener details are no longer needed starting 11.2. Database is registered with default listener and SCAN listener running from Oracle Grid Infrastructure home. --&gt;
&lt;!--Specify the type of storage to be used by rac database. Allowable values are CFS|ASM. The non-rac database should have same storage type. ASM credentials are no needed for conversion. --&gt;
              &lt;n:SharedStorage type="ASM"&gt;
&lt;!--Specify Database Area Location to be configured for rac database.If this field is left empty, current storage will be used for rac database. For CFS, this field will have directory path. --&gt;
                &lt;n:TargetDatabaseArea&gt;+ASMDG&lt;/n:TargetDatabaseArea&gt;
&lt;!--Specify Flash Recovery Area to be configured for rac database. If this field is left empty, current recovery area of non-rac database will be configured for rac database. If current database is not using recovery Area, the resulting rac database will not have a recovery area. --&gt;
                &lt;n:TargetFlashRecoveryArea&gt;+ASMDG&lt;/n:TargetFlashRecoveryArea&gt;
              &lt;/n:SharedStorage&gt;
        &lt;/n:Convert&gt;
    &lt;/n:ConvertToRAC&gt;
&lt;/n:RConfig&gt;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="BABGBIEH" name="BABGBIEH"></a><a id="RIWIN1130" name="RIWIN1130"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">C.6</span> Post-Conversion Steps</h2>
<p>After completing the <a id="sthref501" name="sthref501"></a>conversion, note the following recommendations for Oracle RAC environments, as described in the Oracle RAC documentation:</p>
<ul>
<li>
<p>Follow the recommendations for using load balancing and transparent application failover, as described in <a class="olink RACAD076" href="http://www.oracle.com/pls/db112/lookup?id=RACAD076"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a></p>
</li>
<li>
<p>Use locally managed tablespaces instead of dictionary managed tablespaces to reduce contention and manage sequences in Oracle RAC as described in <a class="olink RACAD755" href="http://www.oracle.com/pls/db112/lookup?id=RACAD755"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a></p>
</li>
<li>
<p>Follow the guidelines for using automatic segment space management as described in <a class="olink RACAD802" href="http://www.oracle.com/pls/db112/lookup?id=RACAD802"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a></p>
</li>
</ul>
<p>The buffer cache and shared pool capacity requirements in Oracle RAC are slightly greater than the requirements for single-instance Oracle databases. Therefore, you should increase the size of the buffer cache by about 10%, and the size of the shared pool by about 15%.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<div class="footer">
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<col width="33%" />
<col width="*" />
<col width="33%" />
<tr>
<td align="left">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="scripts.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="apa.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td style="font-size: 90%" align="center" class="copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
