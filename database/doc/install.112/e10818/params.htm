<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta http-equiv="Content-Language" content="en" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta name="robots" content="all" scheme="http://www.robotstxt.org/" />
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1" />
<meta name="Date" content="2010-03-15T18:13:37Z" />
<meta name="doctitle" content="Oracle&reg; Real Application Clusters Installation Guide 11g Release 2 (11.2) for Microsoft Windows" />
<meta name="partno" content="E10818-02" />
<meta name="docid" content="RIWIN" />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />
<link rel="Stylesheet" href="../../dcommon/css/blafdoc.css" title="Default" type="text/css" />
<script type="text/javascript" src="../../dcommon/js/doccd.js">
</script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="postinst.htm" title="Previous" type="text/html" />
<link rel="Next" href="srvpool.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10818.pdf" title="PDF version" type="application/pdf" />
<title>Configuring Server Parameter Files in Oracle RAC</title>
</head>
<body>
<div class="header">
<div class="zz-skip-header"><a name="top" id="top" href="#BEGIN">Skip Headers</a></div>
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top"><b>Oracle&reg; Real Application Clusters Installation Guide<br />
11<i>g</i> Release 2 (11.2) for Microsoft Windows</b><br />
Part Number E10818-02</td>
<td valign="bottom" align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="postinst.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="srvpool.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td align="right" valign="top" style="font-size: 90%"><a href="../e10818.pdf">View PDF</a></td>
</tr>
</table>
<a name="BEGIN" id="BEGIN"></a></div>
<div class="IND"><!-- End Header --><a id="CIHFCHGH" name="CIHFCHGH"></a><a id="RIWIN007" name="RIWIN007"></a>
<h1 class="chapter"><span class="secnum">5</span> Configuring Server Parameter Files in Oracle RAC</h1>
<p><a id="sthref245" name="sthref245"></a><a id="sthref246" name="sthref246"></a>Oracle Database uses parameter settings in parameter files to determine how to control various database resources. You can use two types of files for parameter administration: the server parameter file (SPFILE) or one or more traditional client-side parameter files (PFILEs). Oracle recommends that you manage parameters using an SPFILE. If you use client-side parameter files, then Oracle does not preserve parameter changes made for self-tuning after shutdown.</p>
<p><a id="sthref247" name="sthref247"></a><a id="sthref248" name="sthref248"></a>This chapter describes server parameter file (SPFILE) placement and configuration in Oracle Real Application Clusters (Oracle RAC) environments.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CJAIAGDI">About the Server Parameter File</a></p>
</li>
<li>
<p><a href="#CIHIDAHD">Creating Server Parameter Files for Oracle RAC</a></p>
</li>
<li>
<p><a href="#CIHJDJGE">Storage Requirements for the Server Parameter File in Oracle RAC</a></p>
</li>
<li>
<p><a href="#CIHCJHEB">Parameter File Search Order in Oracle RAC</a></p>
</li>
<li>
<p><a href="#CIHICJBD">Migrating to the SPFILE in Oracle RAC Environments</a></p>
</li>
<li>
<p><a href="#CIHBAIGB">Server Parameter File Errors in Oracle RAC</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RACAD020" href="http://www.oracle.com/pls/db112/lookup?id=RACAD020"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about parameters, and for a discussion of parallel execution-related parameters in Oracle RAC data warehouse environments</div>
<a id="CJAIAGDI" name="CJAIAGDI"></a><a id="RIWIN1032" name="RIWIN1032"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">5.1</span> About the Server Parameter File</h2>
<p>When you create the database, Oracle Database creates an SPFILE in the file location that you specify. This location can be an Oracle ASM disk group, a cluster file system, or a shared raw device. The Oracle ASM instance also uses a SPFILE.</p>
<p>All instances in the cluster database use the same SPFILE at startup. Because the SPFILE is a binary file, do not directly edit the SPFILE with an editor. Instead, change SPFILE parameter settings using Oracle Enterprise Manager or <code>ALTER SYSTEM</code> SQL statements.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Oracle recommends that you avoid modifying the values for self-tuning parameters; overriding these settings can affect performance adversely.</div>
<p><a id="sthref249" name="sthref249"></a>With Oracle Database 11<span class="italic">g</span> release 2 and later databases, Database Agent automatically maintains the SPFILE based on the value you specify in the SRVCTL command <code>srvctl add/modify</code> <code>-d</code> <span class="italic">dbname</span> <code>-p</code> <code><span class="codeinlineitalic">spfile</span></code>, where <span class="italic">dbname</span> is the database unique name and <code><span class="codeinlineitalic">spfile</span></code> is the name of the SPFILE. You do not need to create or maintain <code>init</code><code><span class="codeinlineitalic">ORACLE_SID</span></code><code>.ora</code> files.</p>
<p>The <a id="sthref250" name="sthref250"></a>default location of the database server parameter file (SPFILE) is in the following path:</p>
<pre xml:space="preserve" class="oac_no_warn"><span class="italic">Oracle_home</span>\database\SPFILE<span class="italic">%ORACLE_SID%</span>.ORA 
</pre>
<p><a id="sthref251" name="sthref251"></a>Using local storage as the default location of the server parameter file is inappropriate for Oracle RAC databases and Oracle ASM instances, because all instances used in a cluster database must use the same server parameter file. See <a href="#CIHJDJGE">"Storage Requirements for the Server Parameter File in Oracle RAC"</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN00202" href="http://www.oracle.com/pls/db112/lookup?id=ADMIN00202"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about managing and modifying parameter files</div>
</div>
<!-- class="sect1" -->
<a id="CIHIDAHD" name="CIHIDAHD"></a><a id="RIWIN702" name="RIWIN702"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">5.2</span> Creating Server Parameter Files for Oracle RAC</h2>
<p>To use DBCA to create your database and configure it to use a server parameter file, perform the following steps:</p>
<ol>
<li>
<p>Start DBCA.</p>
</li>
<li>
<p>When the Initialization Parameters page appears, select <span class="bold">Create server parameter file (SPFILE)</span> under the File Locations tab.</p>
</li>
<li>
<p>After you have made this selection, then enter either a shared file system filename, or enter the storage path in the <span class="bold">Server Parameters Filename</span> field.</p>
</li>
</ol>
<div class="infoboxnote">
<p class="notep1">Note:</p>
When you use DBCA to create the server parameter file, the default <code>SPFILE</code> file name is <code><span class="codeinlineitalic">Oracle_home</span></code><code>\database\init</code><code><span class="codeinlineitalic">%ORACLE_SID%</span></code><code>.ora</code></div>
<p>If you manually create your database, then Oracle recommends that you create an SPFILE from an initialization parameter file (PFILE).</p>
<p>If you must use local storage, then, for Windows-based platforms, Oracle recommends that you use a PFILE in this directory:</p>
<pre xml:space="preserve" class="oac_no_warn"><span class="italic">Oracle_home</span>\database\init<span class="italic">%ORACLE_SID%</span>.ora
</pre>
<p>This recommended location is valid for each instance and refers to a single, non-shared initialization parameter file. Each PFILE should contain an entry for the parameter SPFILE that points to the location of the shared server parameter file to use. For example, if you use NFS for shared storage, then the local PFILE should contain an entry similar to the following:</p>
<pre xml:space="preserve" class="oac_no_warn">SPFILE='\\.\<span class="italic">dbname</span>_SPFILE'
</pre>
<p>However, if you use a cluster file system, then use a SPFILE location similar to the following:</p>
<pre xml:space="preserve" class="oac_no_warn">SPFILE=<span class="italic">shared_location</span>\<span class="italic">dbname</span>\spfile<span class="italic">dbname</span>.ora
</pre>
<p>In this syntax example, the variable <code><span class="codeinlineitalic">shared_location</span></code> is the shared storage location, and the variable <code><span class="codeinlineitalic">dbname</span></code> is the database name.</p>
<p>If you are upgrading from a previous Oracle Database release, then review the section <a href="#CJAIAGDI">"About the Server Parameter File"</a></p>
</div>
<!-- class="sect1" -->
<a id="CIHJDJGE" name="CIHJDJGE"></a><a id="RIWIN1033" name="RIWIN1033"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">5.3</span> Storage Requirements for the Server Parameter File in Oracle RAC</h2>
<p>All instances in an Oracle Real Application Clusters environment must use the same server parameter file. Place the server parameter file on shared storage, such as in an Oracle ASM disk group, a cluster file system, or on a network file system (NFS). Otherwise, place the server parameter file on a shared raw device that is at least 5 MB in size, although this is not recommended.</p>
</div>
<!-- class="sect1" -->
<a id="CIHCJHEB" name="CIHCJHEB"></a><a id="RIWIN703" name="RIWIN703"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">5.4</span> Parameter File Search Order in Oracle RAC</h2>
<p>Oracle Database searches for your <a id="sthref252" name="sthref252"></a>parameter file in the following order:</p>
<ol>
<li>
<p><kbd>Grid Plug and Play profile</kbd></p>
</li>
<li>
<p><kbd><span class="italic">Oracle_home</span>\database\spfile<span class="italic">sid</span>.ora</kbd></p>
</li>
<li>
<p><kbd><span class="italic">Oracle_home</span>\database\spfile.ora</kbd></p>
</li>
<li>
<p><kbd><span class="italic">Oracle_home</span>\database\init<span class="italic">sid</span>.ora</kbd></p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CIHICJBD" name="CIHICJBD"></a><a id="RIWIN704" name="RIWIN704"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">5.5</span> Migrating to the SPFILE in Oracle RAC Environments</h2>
<p><a id="sthref253" name="sthref253"></a>Migrate to the SPFILE by creating and editing the server parameter file using the procedures described in this section.</p>
<p>If your Oracle RAC database does not already use a SPFILE, then you can migrate to the SPFILE file by completing the following procedures:</p>
<ol>
<li>
<p>Combine the initialization parameter files (PFILEs) for all the instances of your Oracle RAC database into one <code>init</code><code><span class="codeinlineitalic">dbname</span></code><code>.ora</code> file by copying all shared <code>IFILE</code> contents <span class="italic">as is</span>. All parameters defined in your <code>IFILE</code> parameter files are global. Therefore, create them in the format <span class="italic">parameter</span>=<span class="italic">value</span>, without <code>SID</code> prefixes.</p>
</li>
<li>
<p>Copy all instance-specific parameter definitions from <code>init</code><code><span class="codeinlineitalic">sid</span></code><code>.ora</code> files using the following syntax, where the variable <code><span class="codeinlineitalic">sid</span></code> is the <code>SID</code> of the instance:</p>
<pre xml:space="preserve" class="oac_no_warn"><span class="italic">sid</span>.<span class="italic">parameter</span>=<span class="italic">value</span> 
</pre>
<p>For example, if your Oracle RAC database is named <code>sales</code>, and the instances have SIDs of <code>sales1</code>, <code>sales2</code>, and so on, then the parameters copied from each IFILE would have the following format:</p>
<pre xml:space="preserve" class="oac_no_warn">sales1.LICENSE_MAX_USERS=<span class="italic">value</span>
sales2.LICENSE_MAX_USERS=value
...
</pre></li>
<li>
<p>If you are using a cluster file system, then Oracle recommends that you use the following command to define the location of the new SPFILE, where <span class="italic">db_unique_name</span> is the database unique identifier and <code><span class="codeinlineitalic">spfile</span></code> is the name of the SPFILE:</p>
<pre xml:space="preserve" class="oac_no_warn">C:\..bin&gt; srvctl modify database -d <span class="italic">db_unique_name</span> -p <span class="italic">spfile</span>
</pre>
<p>You can also create the server parameter file using the <code>CREATE SPFILE</code> statement as in the following example:</p>
<pre xml:space="preserve" class="oac_no_warn">SQL&gt; CREATE SPFILE='?\database\spfile_<span class="italic">dbname</span>.ora'
2&gt;   FROM PFILE='?\database\init<span class="italic">dbname</span>.ora'
</pre>
<p>If you are using Oracle ASM for shared storage, then you can use the following syntax to create the server parameter file, where <code><span class="codeinlineitalic">disk_group_name</span></code> is the disk group name, <code><span class="codeinlineitalic">db_uniquename</span></code> is the database name, <code><span class="codeinlineitalic">dbname</span></code> is the database name, <code><span class="codeinlineitalic">Oracle_home</span></code> is the Oracle home path, and <code>init</code><code><span class="codeinlineitalic">dbname</span></code><code>.ora</code> is the file you created in Step 1:</p>
<pre xml:space="preserve" class="oac_no_warn">SQL&gt; CREATE SPFILE='+<span class="italic">disk_group_name</span>\<span class="italic">db_uniquename\</span>spfile<span class="italic">dbname</span>.ora'
SQL&gt; FROM PFILE='<span class="italic">Oracle_home</span>\database\init<span class="italic">dbname</span>.ora'
</pre>
<p>The <code>CREATE SPFILE</code> SQL statement reads the <code>init</code><code><span class="codeinlineitalic">dbname</span></code><code>.ora</code> file that you created by merging your IFILEs, and then transfers the settings for the parameters from the merged file into your server parameter file.</p>
</li>
<li>
<p>Oracle recommends that you use the SPFILE by configuring the PFILE to point to the location of the SPFILE. Do this by including an entry for SPFILE in the local PFILE, and then running the <code>STARTUP</code> command as in the following example, where the SID variable in <code>init</code><code><span class="codeinlineitalic">sid</span></code><code>.ora</code> is the SID on the local Oracle RAC instance. For example:</p>
<pre xml:space="preserve" class="oac_no_warn">SQL&gt; STARTUP PFILE=<span class="italic">Oracle_home</span>\database\init<span class="italic">sid</span>.ora
</pre>
<p>If you use this <code>STARTUP</code> command syntax, then Oracle Database uses SPFILE parameter setting in the PFILE to obtain the server parameter file specified in the file <code>init</code><code><span class="codeinlineitalic">sid</span></code><code>.ora</code>.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
With Oracle ASM 11<span class="italic">g</span> release 2 and later releases, the SPFILE for the Oracle ASM instance can be stored in Oracle ASM. You can also place an Oracle ASM instance SPFILE on a shared file system, or you can use a traditional client-side parameter file for each Oracle ASM instance.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OSTMG" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG"><span class="italic">Oracle Database Storage Administrator's Guide</span></a> for more information about administering an Oracle ASM instance</div>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CIHBAIGB" name="CIHBAIGB"></a><a id="RIWIN705" name="RIWIN705"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">5.6</span> Server Parameter File Errors in Oracle RAC</h2>
<p>Oracle Database reports errors that occur during <a id="sthref254" name="sthref254"></a>server parameter file creation, or while reading the file during startup. If an error occurs during a parameter update, then Oracle records the error in the database alert log file, and ignores subsequent parameter updates to the file. If this happens, then do either of the following:</p>
<ul>
<li>
<p>Shut down the instance, recover the server parameter file, and restart the instance.</p>
</li>
<li>
<p>Enable the instance to continue running without regard for subsequent parameter updates.</p>
</li>
</ul>
<p>Oracle Database displays errors for parameter changes that you attempt when you incorrectly use the <code>ALTER SYSTEM SET</code> statement. Oracle Database does this when an error occurs while reading from or writing to the server parameter file.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RACAD819" href="http://www.oracle.com/pls/db112/lookup?id=RACAD819"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about backing up the <code>SPFILE</code></div>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<div class="footer">
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<col width="33%" />
<col width="*" />
<col width="33%" />
<tr>
<td align="left">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="postinst.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="srvpool.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td style="font-size: 90%" align="center" class="copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
